<!DOCTYPE html>
<html lang="en">
<head>
    <title>Document</title>
</head>
    <script>
        document.addEventListener('DOMContentLoaded',()=>{
            const input = document.querySelector('#todo')
            // 변수 input에 id가 todo이 아이를 선택하는 메소드를 넣어주세요
            const todolist = document.querySelector('#todo-list')
            // 변수 todolist에 id가 todo-list 아이를 선택하는 메소드를 넣어주세요
            const addButton = document.querySelector('#add-button')
            // 변수 addButton에 id가 add-button인 아이를 선택하는 메소드를 넣어주세요
        
        let keyCount = 0
        // 변수 keyCount를 0으로 초기화합니다.
        const addTodo = () => {
            if(input.value.trim() === ''){
                // trim을 해서 공백을 없애준 input의 value가 공백인지 확인해줍니다.
                alert('할 일을 입력해주세요.')
                // 공백이면 경고창을 뛰어주세요
                return
                // 끝냅니다.
            }
            const item = document.createElement('div')
            // item 변수에 div를 추가하는 메소드를 저장합니다.
            const checkbox = document.createElement('input')
            // checkbox 변수에 input을 추가하는 메소드를 저장합니다.
            const text = document.createElement('span')
            // text 변수에 span을 추가하는 메소드를 저장합니다.
            const button = document.createElement('button')
            // button 변수에 button을 추가하는 메소드를 저장합니다.
            const key = keyCount
            // key에 초기값인 0이 들어갑니다.
            keyCount += 1
            // keyCount는 인덱스와 동일한 기능을 합니다.
            item.setAttribute('data-key',key)
            // setAttribute를 이용하여 data-key라는 이름의 key를 세팅해주빈다.
            item.appendChild(checkbox)
            // checkbox를 item에 추가합니다.
            item.appendChild(text)
            // text item에 추가합니다.
            
            item.appendChild(button)
            // button item에 추가합니다.
            todolist.appendChild(item)
            // item todolist에 추가합니다.

            checkbox.type = 'checkbox'
            // checkbox의 속성을 checkbox로 만들어줍니다.
            // checkbox type = "checkbox"
            checkbox.addEventListener('change',(event)=>{
                item.style.textDecoration = event.target.checked ? 'line-through' : ''
            })
            // checkbox가 change 즉 체크 되면 삼항 연산자를 이용하여 체크시 밑줄 아닐시 아무 효과 없음을 넣어줍니다.
            text.textContent = input.value
            // input의 value를 text에 넣어줍니다.
            button.textContent='제거하기'
            // 제거하기 버튼을 만들어줍니다.
            button.addEventListener('click',()=>{
                removeTodo(key)
            })
            //  버튼을 누룰시 key값에 따른 todo를 제거해줍니다.
            input.value = ''
            // 그리고 input value를 즉 todo를 공백으로 바꿔줍니다.
        }
        
        const removeTodo = (key) => {
            const item = document.querySelector(`[data-key= "${key}"]`)
            todolist.removeChild(item)
        }
        // removeTodo에 대한 함수가 없으므로 만들어줍니다.
        // data-key가 key값과 같은 인덱스의 todo를 제거해줍니다.
        
        addButton.addEventListener('click',()=>{
            addTodo()
        })
        input.addEventListener('keyup',(event)=>{
            const Enter = 13
            if(event.keyCode === Enter){
                addTodo()
            }
        })
        // addbutton을 클릭하면 addtodo가 실행되도록 만들어줍니다.
        // input에 keyup 13 즉 엔터치면 addTodo()가 실행되도록 만들어줍니다.

        })
    </script>
<body>
    <h1>할 일 목록</h1>
    <input type="text" id="todo">
    <button id="add-button">추가하기</button>
    <div id="todo-list"></div>
</body>
</html>